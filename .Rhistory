acura_2015 <- filter(vehicles, year == 2015, make == "Acura")
acura_mgh <- filter(vehicles, hwy == max(hwy))
best_mgh <- select(acura_mgh, model)
View(best_mgh)
acura_2015 <- filter(vehicles, year == 2015, make == "Acura")
acura_mgh <- filter(acura_2015, hwy == max(hwy))
best_mgh <- select(acura_mgh, model)
View(acura_mgh)
View(best_mgh)
best_mgh <- select(
filter(
filter(vehicles, year == 2015, make == "Acura"),
hwy == max(hwy)
),
model
)
View(best_mgh)
best_mgh <- filter(vehicles, year == 2015, make == "Acura") %>%
filter(hwy == max(hwy)) %>%
select(model)
View(best_mgh)
install.packages("nycflights13")
library("nycflights13")
library("dplyr")
??flights
num_flights <- nrow(flights)
factors <- ncol(flights)
VIew(flights)
View(flights)
flights <- mutate(
flights,
time_changed_flying = (dep_time - sched_dep_time) - (arr_time - sched_arr_time)
)
View(flights)
flights <- arrange(flights, - time_changed_flying)
flights <- mutate(
flights,
time_changed_flying = dep_delay - arr_delay
)
flights <- arrange(flights, - time_changed_flying)
flights <- flights %>%
mutate(time_changed_flying = dep_delay - arr_delay) %>%
arrange(- time_changed_flying)
View(flights)
?hist()
time_gained <- hist(flights%time_changed_flying)
hist(flights%time_changed_flying)
hist(flights[[time_changed_flying]])
hist(flights[time_changed_flying])
time_gained <- flights$time_changed_flying
time_gained <- flights[time_changed_flying]
time_gained <- flights[[time_changed_flying]]
hist(flights$time_changed_flying)
avg_gain_loss <- mean(flights, na.rm = TRUE)
avg_gain_loss <- mean(flights$time_changed_flying, na.rm = TRUE)
sea_flights <- flights %>%
filter(dest == "SEA") %>%
select(origin, dest, time_changed_flying)
View(sea_flights)
sea_avg_gain_loss <- mean(sea_flights$time_changed_flying, na.rm = TRUE)
flights %>%
filter(origin == "JFK", dest == "SEA") %>%
summarize(
avg_jfk_sea <- mean(air_time, na.rm = TRUE),
min_jfk_sea <- min(air_time, na.rm = TRUE),
max_jfk_sea <- max(air_time, na.rm = TRUE)
)
jfk_to_sea <- flights %>%
filter(origin == "JFK", dest == "SEA") %>%
summarize(
avg_jfk_sea <- mean(air_time, na.rm = TRUE),
min_jfk_sea <- min(air_time, na.rm = TRUE),
max_jfk_sea <- max(air_time, na.rm = TRUE)
)
View(jfk_to_sea)
library("nycflights13")
library("dplyr")
View(flights)
dep_delay_by_month <- flights %>%
group_by(dep_delay) %>%
avg_delay <- mean(dep_delay)
dep_delay_by_month <- flights %>%
group_by(dep_delay) %>%
summarize(avg_delay = mean(dep_delay))
View(dep_delay_by_month)
dep_delay_by_month <- flights %>%
group_by(month) %>%
summarize(avg_delay = mean(dep_delay))
dep_delay_by_month <- flights %>%
group_by(month) %>%
summarize(avg_delay = mean(dep_delay, na.rm = TRUE))
most_delay <- max(dep_delay_by_month)
plot(dep_delay_by_month)
dep_delay_dest <- flights %>%
group_by(dest) %>%
summarize(avg_delay = mean(dep_delay, na.rm = TRUE))
View(dep_delay_dest)
dep_delay_dest <- flights %>%
group_by(dest) %>%
summarize(avg_delay = mean(dep_delay, na.rm = TRUE)) %>%
arrange(-avg_delay)
View(airports)
highest_speed <- flights %>%
mutate(speed = distance / air_time * 60) %>%
group_by(dest) %>%
summarize(avg_speed = mean(speed, na.rm = TRUE)) %>%
arrange(-avg_speed)
View(highest_speed)
avg_delay_dest <- flights %>%
group_by(dest) %>%
summarize(delay_by_dest = mean(arr_delay, na.rm = TRUE))
View(avg_delay_dest)
View(airports)
avg_delay_dest <- flights %>%
group_by(dest) %>%
summarize(delay_by_dest = mean(arr_delay, na.rm = TRUE)) %>%
mutate(faa = dest)
airports_new <-airports %>%
left_join(avg_delay_dest, by = "faa") %>%
arrange(-delay_by_dest)
View(airports_new)
View(airlines)
avg_delay_airline <- flights %>%
group_by(carrier) %>%
summarize(avg_delay - mean(arr_delay, na.rm = TRUE)) %>%
right_join(airlines, by = "carrier") %>%
arrange(avg_delay)
avg_delay_airline <- flights %>%
group_by(carrier) %>%
summarize(avg_delay = mean(arr_delay, na.rm = TRUE)) %>%
right_join(airlines, by = "carrier") %>%
arrange(avg_delay)
View(avg_delay_airline)
avg_delay_airline <- flights %>%
group_by(carrier) %>%
summarize(avg_delay = mean(arr_delay, na.rm = TRUE)) %>%
left_join(airlines, by = "carrier") %>%
arrange(avg_delay)
View(avg_delay_airline)
library("nycflights13")
library("dplyr")
setwd("~/stuff/info201/final-project-starter-eolshan03")
setwd("~/stuff/info201/final-project-starter-eolshan03")
knitr::opts_chunk$set(echo = TRUE)
getwd()
# Load necessary libraries
library(knitr)
source("../source/line_chart.R")
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE)
View(set_1)
set_1 %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
)
set_1 <- set_1 %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
)
set_1 <- set_1 %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -OBJECTID, -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
)
set_1 <- set_1 %>%
mutate(year = paste0("20", str_sub(attribute, -2)),
state = str_sub(coc_num, 1, 2),
value = as.integer(value_text)
)
set_1 <- set_1 %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_1 <- read.csv("sdata/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
) %>%
mutate(state = str_sub(coc_num, 1, 2)) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
) %>%
mutate(year = paste0("20", str_sub(attribute, -2)),
state = str_sub(coc_num, 1, 2),
value = as.integer(value_text)
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_2 <- read.csv("data/homelessness-count-usa.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
year = Year,
attribute = Attribute.Name,
) %>%
mutate(state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(Value)
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
View(set_2)
View(set_1)
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
mutate(year = substr(Year, 5, 8),
state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(Count, na.rm = TRUE)
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
View(set_3)
?is.na()
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
filter(!is.na(value)) %>%
mutate(year = substr(Year, 5, 8),
state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(Count)
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
filter(!is.na(Count)) %>%
mutate(year = substr(Year, 5, 8),
state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(Count)
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
filter(is.na(Count))
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
filter(!is.na(Count))
set_3 %>% filter(is.na(Count))
set_3 <- set_3 %>% mutate(year = substr(Year, 5, 8),
state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(Count)
)
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
filter(!is.na(Count))
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
filter(!is.na(Count)) %>%
mutate(year = substr(Year, 5, 8),
state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(str_replace_all(Count, ",", ""))
)
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
filter(!is.na(Count)) %>%
mutate(year = substr(Year, 5, 8),
state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(str_replace_all(Count, ",", ""))
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
) %>%
mutate(year = paste0("20", str_sub(attribute, -2)),
state = str_sub(coc_num, 1, 2),
value = as.integer(value_text)
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
View(set_1)
set_2 <- read.csv("data/homelessness-count-usa.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
year = Year,
attribute = Attribute.Name,
) %>%
mutate(state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(Value)
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
View(set_2)
set_3 <- read.csv("data/homelessness-2007-2016.csv",
stringsAsFactors = FALSE
) %>%
rename(coc_name = CoC.Name,
coc_num = CoC.Number,
attribute = Measures,
) %>%
filter(!is.na(Count)) %>%
mutate(year = substr(Year, 5, 8),
state = str_sub(coc_num, 1, 2),
coc_cat = "x",
value = as.integer(str_replace_all(Count, ",", ""))
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
View(set_3)
combined_homeless <- rbind(set_1, set_2, set_3)
write.csv(combined_homeless, "data/combined_homeless.csv")
View(combined_homeless)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE)
View(set_1)
set_1 <- set_1  %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
) %>%
mutate(year = paste0("20", str_sub(attribute, -2)),
state = str_sub(coc_num, 1, 2),
value = as.integer(value_text)
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
set_1 <- read.csv("data/pit-homeless-by-coc.csv", stringsAsFactors = FALSE) %>%
rename(coc_name = L0Continuum_of_Care_Grantee_Are,
coc_num = COCNUM,
coc_cat = COCCAT,
) %>%
gather(key = attribute,
value = "value_text",
-coc_name, -coc_num, -coc_cat, -"OBJECTID", -Merger_flag, -COCNAME,
-SHAPE_Length, -SHAPE_Area
) %>%
mutate(year = paste0("20", str_sub(attribute, -2)),
state = str_sub(coc_num, 1, 2),
value = as.integer(value_text)
)
combined_homeless <- read.csv("data/combined_homeless.csv",
stringsAsFactors = FALSE
)
View(combined_homeless)
combined_homeless <- read.csv("data/combined_homeless.csv",
stringsAsFactors = FALSE
) %>%
select(coc_name, coc_num, state, coc_cat, year, attribute, value)
summary <- list()
# num_observations is just the total number of observations across the 3
# original sets
summary$num_observations <- nrow(combined_homeless)
# area_highest_total is the CoC with the highest total homeless population
summary$area_highest_total <- combined_homeless %>%
filter(attribute == "Total Homeless" | str_sub(attribute, 1, 3) == "TOT",
coc_name != "Total"
) %>%
filter(value == max(value, na.rm = TRUE)) %>%
pull(coc_name)
# highest_total_state_2018 combines the total populations for each state and
# returns the state with the highest population
summary$highest_total_state_2018 <- combined_homeless %>%
filter(str_sub(attribute, 1, 3) == "TOT",
year == 2018
) %>%
group_by(state) %>%
summarise(total_in_state = sum(value, na.rm = TRUE)) %>%
filter(total_in_state == max(total_in_state)) %>%
pull(state)
# calculates percent shelered in each CoC in 2016 and averages all
summary$avg_percent_sheltered_2016 <- combined_homeless %>%
filter(year == 2016,
attribute == "Sheltered Homeless" | attribute == "Total Homeless",
) %>%
select(coc_num, state, attribute, value) %>%
group_by(coc_num) %>%
arrange(attribute, .by_group = TRUE) %>%
mutate(percent_sheltered = value / lead(value)) %>%
summarise(avg = sum(percent_sheltered, na.rm = TRUE)) %>%
filter(avg != 0) %>%
summarise(mean(avg, na.rm = TRUE)) %>%
pull("mean(avg, na.rm = TRUE)")
# calculates percent shelered in each CoC in 2016 and averages all
summary$avg_percent_unsheltered_2016 <- combined_homeless %>%
filter(year == 2016,
attribute == "Unsheltered Homeless" | attribute == "Total Homeless",
) %>%
select(coc_num, state, attribute, value) %>%
group_by(coc_num) %>%
arrange(attribute, .by_group = TRUE) %>%
mutate(percent_unsheltered = value / lag(value)) %>%
summarise(avg = sum(percent_unsheltered, na.rm = TRUE)) %>%
filter(avg != 0) %>%
summarise(mean(avg, na.rm = TRUE)) %>%
pull("mean(avg, na.rm = TRUE)")
View(summary)
